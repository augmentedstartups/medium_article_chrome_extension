# v1.6.0 - FILE_UPLOAD Strategy Default

## Changes

### Default Strategy
- Changed default from `CLIPBOARD_API` to `FILE_UPLOAD`
- Updated UI to show "File Upload (RECOMMENDED)"
- Marked as "High - working âœ“"

### How It Works

#### Medium â†’ LinkedIn Flow
1. **Extract from Medium**: Click "Extract" button in popup
2. **Open LinkedIn**: Click "Post to LinkedIn" 
3. **Sequential Injection**: 
   - Title inserted first
   - Content blocks processed in order:
     - Text paragraphs inserted via `insertTextBlock()`
     - Images uploaded via `uploadImageAsFile()`
   - CTA image appended automatically
   - Cover image uploaded last

#### Image Upload Process
For each image:
1. Focus editor
2. Clean up old file inputs
3. Click image upload button
4. Wait for file input (800ms delay)
5. Create file from dataURL
6. Dispatch file to input
7. **Wait 2s for Next button**
8. **Click Next button**
9. **Wait for modal to close** (checks `.share-box-footer`, modals, Next buttons)
10. Confirm image in editor
11. Refocus editor
12. Continue to next block

#### Key Features
- **Modal Management**: Waits for upload modal to fully close before next image
- **Next Button Click**: Finds and clicks Next button after each upload
- **Persistence**: Images persist after page refresh (native LinkedIn upload)
- **Sequential Processing**: Text â†’ Image â†’ Text â†’ Image pattern maintained
- **Error Recovery**: Detailed logging at each step

## Testing

### Test Button (on LinkedIn)
- Purple button: "ðŸ§ª Insert Test Article"
- Tests 5 text blocks + 3 images
- Same test image reused 3 times
- Uses assets/ritz_cta.png

### Medium Extraction
1. Navigate to Medium article
2. Open extension popup
3. Click "Extract"
4. Click "Post to LinkedIn"
5. Watch sequential upload with Next button clicks

## Settings

Users can change strategy in Options:
- FILE_UPLOAD (default, recommended)
- CLIPBOARD_API
- USER_PASTE
- PROSEMIRROR

## Performance

- Text insertion: ~200ms per block
- Image upload: ~3-5s per image (includes Next button + modal close wait)
- Total time: Depends on number of images (3 images â‰ˆ 10-15s)

## Compatibility

- âœ… Works with LinkedIn's native upload
- âœ… Images persist on refresh
- âœ… Handles upload modal correctly
- âœ… Sequential text/image insertion
- âœ… Cover image upload
- âœ… CTA image auto-append

